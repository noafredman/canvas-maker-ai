<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Maker - Draw & Make Real</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- Floating Toolbar -->
        <div id="floating-toolbar" class="floating-toolbar">
            <div class="toolbar-drag-handle" id="toolbar-drag-handle">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                    <circle cx="5" cy="7" r="1"/>
                    <circle cx="12" cy="7" r="1"/>
                    <circle cx="19" cy="7" r="1"/>
                    <circle cx="5" cy="12" r="1"/>
                    <circle cx="12" cy="12" r="1"/>
                    <circle cx="19" cy="12" r="1"/>
                    <circle cx="5" cy="17" r="1"/>
                    <circle cx="12" cy="17" r="1"/>
                    <circle cx="19" cy="17" r="1"/>
                </svg>
            </div>
            
            <div class="toolbar-content">
                <div class="toolbar-section">
                    <button id="pen-tool" class="tool-btn" data-tool="pen" title="Pen Tool">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                        </svg>
                    </button>
                    <button id="rectangle-tool" class="tool-btn" data-tool="rectangle" title="Rectangle Tool">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 3v18h18V3H3zm16 16H5V5h14v14z"/>
                        </svg>
                    </button>
                    <button id="circle-tool" class="tool-btn" data-tool="circle" title="Circle Tool">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                    </button>
                    <button id="text-tool" class="tool-btn" data-tool="text" title="Text Tool">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5 4v3h5.5v12h3V7H19V4z"/>
                        </svg>
                    </button>
                    <button id="select-tool" class="tool-btn active" data-tool="select" title="Select Tool">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M2 2v6h2V4h4V2H2zm0 16v-6h2v4h4v2H2zm20 0h-6v2h4v-4h2v6zm0-16V2h-6v2h4v4h2V6z"/>
                        </svg>
                    </button>
                    <button id="nested-canvas-tool" class="tool-btn" data-tool="nested-canvas" title="Nested Canvas Tool">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M4 4h16v16H4V4zm2 2v12h12V6H6zm2 2h8v8H8V8zm2 2v4h4v-4h-4z"/>
                        </svg>
                    </button>
                </div>
                
                <div class="toolbar-divider"></div>
                
                <div class="toolbar-section">
                    <button id="make-real-btn" class="make-real-btn" title="Make Real">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2l3.09 8.26L22 12l-6.91 1.74L12 22l-3.09-8.26L2 12l6.91-1.74L12 2z"/>
                        </svg>
                    </button>
                    <button id="clear-btn" class="clear-btn" title="Clear Canvas">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="canvas-container">
            <canvas id="canvas" width="1200" height="800"></canvas>
            <div id="selection-box" class="selection-box"></div>
            <div class="canvas-controls">
                <div class="zoom-controls">
                    <button id="zoom-out-btn" class="zoom-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 13H5v-2h14v2z"/>
                        </svg>
                    </button>
                    <div id="zoom-indicator" class="zoom-indicator">100%</div>
                    <button id="zoom-in-btn" class="zoom-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                        </svg>
                    </button>
                </div>
                <button id="recenter-btn" class="recenter-btn" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                        <circle cx="12" cy="12" r="6" stroke="currentColor" stroke-width="2" fill="none"/>
                        <circle cx="12" cy="12" r="2" fill="currentColor"/>
                    </svg>
                </button>
                <button id="reset-zoom-btn" class="recenter-btn" style="display: none;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                        <text x="9.5" y="11" text-anchor="middle" font-size="6" font-weight="bold" fill="currentColor">100</text>
                    </svg>
                </button>
            </div>
        </div>
        
        <div id="preview-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Generated Code</h3>
                    <button id="close-modal" class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <iframe id="preview-iframe" src=""></iframe>
                </div>
            </div>
        </div>
        
        <div id="nested-canvas-overlay" class="nested-canvas-overlay" style="display: none;">
            <div class="nested-canvas-container">
                <div class="nested-canvas-header">
                    <div class="nested-canvas-title-bar">
                        <span class="nested-canvas-title">Nested Canvas</span>
                        <button id="close-nested-canvas" class="close-btn">&times;</button>
                    </div>
                </div>
                <div class="nested-canvas-content">
                    <!-- Floating Toolbar for Nested Canvas -->
                    <div id="nested-floating-toolbar" class="floating-toolbar nested-floating-toolbar">
                        <div class="toolbar-drag-handle" id="nested-toolbar-drag-handle">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="5" cy="7" r="1"/>
                                <circle cx="12" cy="7" r="1"/>
                                <circle cx="19" cy="7" r="1"/>
                                <circle cx="5" cy="12" r="1"/>
                                <circle cx="12" cy="12" r="1"/>
                                <circle cx="19" cy="12" r="1"/>
                                <circle cx="5" cy="17" r="1"/>
                                <circle cx="12" cy="17" r="1"/>
                                <circle cx="19" cy="17" r="1"/>
                            </svg>
                        </div>
                        
                        <div class="toolbar-content">
                            <div class="toolbar-section">
                                <button id="nested-pen-tool" class="tool-btn active" data-tool="pen" title="Pen Tool">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                    </svg>
                                </button>
                                <button id="nested-rectangle-tool" class="tool-btn" data-tool="rectangle" title="Rectangle Tool">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M3 3v18h18V3H3zm16 16H5V5h14v14z"/>
                                    </svg>
                                </button>
                                <button id="nested-circle-tool" class="tool-btn" data-tool="circle" title="Circle Tool">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" fill="none"/>
                                    </svg>
                                </button>
                                <button id="nested-line-tool" class="tool-btn" data-tool="line" title="Line Tool">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <rect x="2" y="11" width="20" height="2" transform="rotate(45 12 12)"/>
                                    </svg>
                                </button>
                                <button id="nested-arrow-tool" class="tool-btn" data-tool="arrow" title="Arrow Tool">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M4 11h12v2H4v-2zm12-2l4 3-4 3v-2H4v-2h12v-2z"/>
                                    </svg>
                                </button>
                                <button id="nested-text-tool" class="tool-btn" data-tool="text" title="Text Tool">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M5 4v3h5.5v12h3V7H19V4z"/>
                                    </svg>
                                </button>
                                <button id="nested-select-tool" class="tool-btn" data-tool="select" title="Select Tool">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M2 2v6h2V4h4V2H2zm0 16v-6h2v4h4v2H2zm20 0h-6v2h4v-4h2v6zm0-16V2h-6v2h4v4h2V6z"/>
                                    </svg>
                                </button>
                            </div>
                            
                            <div class="toolbar-divider"></div>
                            
                            <div class="toolbar-section">
                                <button id="nested-clear-btn" class="clear-btn" title="Clear Canvas">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <canvas id="nested-canvas" width="800" height="600"></canvas>
                    <div id="nested-selection-box" class="selection-box"></div>
                    <div class="canvas-controls">
                        <div class="zoom-controls">
                            <button id="nested-zoom-out-btn" class="zoom-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19 13H5v-2h14v2z"/>
                                </svg>
                            </button>
                            <div id="nested-zoom-indicator" class="zoom-indicator">100%</div>
                            <button id="nested-zoom-in-btn" class="zoom-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                </svg>
                            </button>
                        </div>
                        <button id="nested-recenter-btn" class="recenter-btn" style="display: none;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                                <circle cx="12" cy="12" r="6" stroke="currentColor" stroke-width="2" fill="none"/>
                                <circle cx="12" cy="12" r="2" fill="currentColor"/>
                            </svg>
                        </button>
                        <button id="nested-reset-zoom-btn" class="recenter-btn" style="display: none;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                                <text x="9.5" y="11" text-anchor="middle" font-size="6" font-weight="bold" fill="currentColor">100</text>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Layer Panel -->
        <div id="layer-panel" class="layer-panel">
            <div class="layer-panel-header">
                <div class="layer-title">Layers</div>
                <button id="layer-panel-toggle" class="layer-toggle-btn" title="Toggle Layer Panel">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"/>
                    </svg>
                </button>
            </div>
            <div class="layer-panel-content">
                <div id="layer-tree" class="layer-tree">
                    <!-- Layer items will be populated by JavaScript -->
                </div>
            </div>
            <div class="layer-panel-resize-handle"></div>
        </div>
        
        <!-- Properties Panel -->
        <div id="properties-panel" class="properties-panel" style="display: none;">
            <div class="properties-panel-header">
                <div class="properties-title">Properties</div>
                <div class="platform-selector">
                    <select class="platform-dropdown">
                        <option value="web">Web</option>
                        <option value="ios">iOS</option>
                        <option value="android">Android</option>
                        <option value="react-native">React Native</option>
                        <option value="flutter">Flutter</option>
                        <option value="vue">Vue.js</option>
                        <option value="angular">Angular</option>
                    </select>
                </div>
            </div>
            <div class="properties-panel-content">
                <!-- Content will be populated by JavaScript -->
            </div>
            <div class="properties-panel-footer">
                <button class="export-code-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
                    </svg>
                    Export Code
                </button>
            </div>
        </div>
    </div>
    
    <script src="canvas.js"></script>
    <script src="create-nested-component.js"></script>
</body>
</html>